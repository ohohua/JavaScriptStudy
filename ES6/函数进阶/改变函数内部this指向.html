<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button>bind</button>
    <button>bind1</button>
    <button>bind2</button>
    <script>
      //æ”¹å˜å‡½æ•°å†…thisçš„æŒ‡å‘ jsæä¾›äº†3ç§æ–¹æ³• call()  apply()  bind()

      // 1.call()
      var o = {
        name: "andy",
      };
      function fn(a, b) {
        console.log(this);
        console.log(a + b);
      }
      fn.call(o, 1, 2);
      // callç¬¬ä¸€ä¸ªå¯ä»¥è°ƒç”¨å‡½æ•°ï¼Œç¬¬äºŒä¸ªå¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘
      // callçš„ä¸»è¦ä½œç”¨å¯ä»¥å®ç°ç»§æ‰¿ ğŸ‘‡
      function Father(uname, age, sex) {
        this.uname = uname;
        this.age = age;
        this.sex = sex;
      } //çˆ¶ç±»æ„é€ å‡½æ•°
      function Son(uname, age, sex) {
        Father.call(this, uname, age, sex); //è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå°†çˆ¶ç±»ä¸­çš„thisè®¾ç½®ä¸ºå­ç±»ä¸­çš„thisï¼ŒåŒæ—¶ä¼ å…¥å­ç±»çš„å‚æ•°
      }
      var son = new Son("åˆ˜å¾·å", 18, "ç”·");
      console.log(son);



      // 2.apply()  åº”ç”¨ è¿ç”¨çš„æ„æ€
      var o2 = {
        name: "Rick",
      };
      function fn1(arr) {
        console.log(this);
        console.log(arr); // ä¼ è¿‡æ¥çš„æ˜¯'pink'ï¼Œæ²¡æœ‰æ•°ç»„çš„[]äº†
      }
      fn1.apply(o2, ["pink"]);
      // 1.ä¹Ÿæ˜¯è°ƒç”¨å‡½æ•°ï¼Œç¬¬äºŒä¸ªå¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨thisçš„æŒ‡å‘
      // 2.ä½†å®ƒçš„å‚æ•°å¿…é¡»æ˜¯æ•°ç»„(ä¼ªæ•°ç»„)
      // 3.apply çš„ä¸»è¦åº”ç”¨ æ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ apply å€ŸåŠ©äºæ•°å­¦å†…ç½®å¯¹è±¡æ±‚æœ€å¤§å€¼
      // Math.max();
      var arr = [1, 55, 99, 15];
      // console.log(Math.max.apply(null,arr)); //æ­¤æ—¶ä¸éœ€è¦æ”¹å˜Mathä¸­çš„thisæŒ‡å‘ï¼Œæ‰€ä»¥æŒ‡å‘Mathè‡ªå·±å°±å¥½ï¼ŒæŒ‡å‘nullä¸å¥½
      console.log(Math.max.apply(Math, arr)); //applyä¼šå°†æ•°ç»„çš„[]å¤–è¡£å»æ‰
      console.log(Math.max(1, 55, 99, 15)); //ä¸ç”¨applyçš„è¯åªèƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ä½¿ç”¨Math.max()




      // 3.bind() ç»‘å®š æ†ç»‘çš„æ„æ€
      var o3 = {
        name: "Lily",
      };
      function fn3(a, b) {
        console.log(this);
        console.log(a + b);
      }
      var f = fn3.bind(o3, 1, 2);
      f(); //{name: "Lily"}
      // 1.ä¸ä¼šè°ƒç”¨åŸæ¥çš„å‡½æ•°   å¯ä»¥æ”¹å˜åŸæ¥å‡½æ•°å†…éƒ¨thisæŒ‡å‘
      // 2.è¿”å›çš„æ˜¯ åŸå‡½æ•°æ”¹å˜thisä¹‹åçš„ æ–°å‡½æ•°
      // 3.å¦‚æœæœ‰çš„å‡½æ•°ä¸éœ€è¦ç«‹å³è°ƒç”¨ï¼Œåˆæƒ³æ”¹å˜è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘ï¼Œæ­¤æ—¶ç”¨bind()
      // exï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»äº†ä¹‹åï¼Œå°±ç¦ç”¨è¿™ä¸ªæŒ‰é’®ï¼Œ3ç§’ä¹‹åå¼€å¯è¿™ä¸ªæŒ‰é’®
      var btn = document.querySelector("button");
      btn.onclick = function () {
        this.disabled = true; //trueç¦ç”¨,è¿™ä¸ªthisæŒ‡å‘çš„æ˜¯btnè¿™ä¸ªæŒ‰é’®
        //å¼€å§‹è®¡æ—¶
        //  var that = this;   //è€æ–¹æ³•
        setTimeout(
          function () {
            //  that.disabled = false;  //ï¼ˆè€æ–¹æ³•ï¼‰å®šæ—¶å™¨é‡Œé¢çš„thisæŒ‡å‘çš„æ˜¯window
            this.disabled = false;
          }.bind(this), //åœ¨è¿™é‡Œæ”¹å˜thisæŒ‡å‘ï¼Œè¿™é‡Œçš„thisæ˜¯æŒ‡å‘btnçš„(å› ä¸ºåœ¨functionå¤–é¢)
          3000
        );
      };
      // ä¸Šé¢bindé‡Œé¢å†™thisçš„å¥½å¤„è¿˜ä¸èƒ½ä½“ç°å‡ºæ¥ï¼Œå½“æŒ‰é’®å˜å¤šäº†ä¹‹å exï¼šğŸ‘‡
/*       var btns = document.querySelectorAll("button");
      for (var i = 0; i < btns.length; i++) {
        btns[i].onclick = function () {
          this.disabled = true;

          setTimeout(
            function () {
              this.disabled = false;
            }.bind(this),
            3000
          );
        };
      } */
    </script>
  </body>
</html>
